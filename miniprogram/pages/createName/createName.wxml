<!--miniprogram/pages/createName/createName.wxml-->
<view class="page">
  <view class="weui-cells__group weui-cells__group_form">
    <view class="weui-cells__title">基础信息</view>
    <view class="weui-cells weui-cells_form">
      <view class="weui-cell">
        <view class="weui-cell__hd"><label class="weui-label">姓氏</label></view>
        <view class="weui-cell__bd">
          <input class="weui-input" placeholder="填写姓氏" placeholder-class="weui-input__placeholder" data-field="surname" value="{{ formData.surname }}" bindblur="updateValue" />
        </view>
      </view>
      <view class="weui-cell">
        <view class="weui-cell__hd">              
          <label class="weui-label">性别</label>
        </view>
        <view class="weui-cell__bd">
          <radio-group class="radio-grp" data-field="used" bindchange="radioChange">
            <label class="wx-flex radio-label">
              <radio value="1" checked="true" />
              <view class="weui-cell__bd">男</view>
            </label>
            <label class="wx-flex">
              <radio value="0" />
              <view class="weui-cell__bd">女</view>
            </label>
          </radio-group>
        </view>
      </view>
      <view class="weui-cell">
        <view class="weui-cell__hd">              
          <label class="weui-label">字数</label>
        </view>
        <view class="weui-cell__bd">
          <radio-group class="radio-grp" data-field="length" bindchange="radioChange">
            <label class="wx-flex radio-label">
              <radio value="1" checked="true" />
              <view class="weui-cell__bd">单字</view>
            </label>
            <label class="wx-flex">
              <radio value="2" />
              <view class="weui-cell__bd">双字</view>
            </label>
          </radio-group>
        </view>
      </view><view class="weui-cell">
        <view class="weui-cell__hd"><label class="weui-label">特征</label></view>
        <view class="weui-cell__bd">
          <input class="weui-input" placeholder="填写特征，如古典，霸气，温柔等等" placeholder-class="weui-input__placeholder" data-field="feature" value="{{ formData.feature }}" bindblur="updateValue" />
        </view>
      </view>
    </view>
  </view>
  <button class="form-btn" type="primary" bindtap="createName" loading="{{ loading }}">生成名字</button>

  <view wx:if="{{ topTips }}" class="weui-toptips weui-toptips_warn">拷贝成功</view>

  <view class="name-list">
    <view class="name-item" wx:for="{{ nameList }}" wx:key="index">
      <view class="word-wrapper">
        <view>
          <text>{{ formData.surname }}{{ item.word }}</text>
          <text class="word-attr">【{{ item.pronounce }}】【{{ item.attr }}】</text>
        </view>
        <view class="icongrp">
          <text class="iconfont icon-copy" data-name="{{ item.word }}" bindtap="copyName"></text>
          <text class="iconfont icon-like" 
            data-index="{{ index }}" 
            style="color: {{ item.like ? 'red' : 'initial' }}; font-weight: {{ item.like ? 'bold' : 'initial' }}" 
            bindtap="clickLike"></text>
        </view>
      </view>
      <view class="source-wrapper">
        <view class="mean">{{ item.mean }}</view>
        <view class="source">出自 “{{ item.source }}” -- {{ item.author }}{{ item.dynasty === '' ? '' : ' · ' }}{{ item.dynasty }} {{ item.poetry === '' ? '' : '《' + item.poetry + '》' }}</view>
      </view>
    </view>
  </view>
  <block wx:if="{{ nameList.length !== 0 }}">
    <view class="page__hd" wx:if="{{ !loadingMore }}">
      <view class="page__desc" bindtap="loadmore">加载更多</view>
    </view>
    <view class="page__bd" wx:if="{{ loadingMore }}">
      <view class="weui-loadmore">
        <i class="weui-loading"></i>
        <text class="weui-loadmore__tips">正在加载</text>
      </view>
    </view>
  </block>
</view>
